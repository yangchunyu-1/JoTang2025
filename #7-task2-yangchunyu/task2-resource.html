<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>资源</title>
    <link rel="stylesheet" href="task2-resource.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <nav class="nav1">
        <div class="navigation">
            <div class="hdl">焦糖口袋站</div>
            <ul class="menu">
                <li class="item"><a href="#home" class="nav-link">首页</a></li>
                <li class="item"><a href="task2-resource.html" class="nav-link">资源</a></li>
                <li class="item"><a href="task1-overview.html" class="nav-link" target="_blank">概览</a></li>
                <li class="item"><a href="#aboutus" class="nav-link"></a>关于我们</a></li>
                <li class="item"><a href="#contactus" class="nav-link" >联系我们</a></li>
            </ul>
        </div>        
    </nav>
    
    <div class="resource-header">
        <h1>欢迎来到资源中心！</h1>
        <p>在这里分享，查询各类优质资源！</p>

        <div class="search-container">
            <div class="searchbox">
                <i class="fas fa-search search-icon"></i>
                <input type="text" class="search-input" placeholder="搜索资源..." id="searchinput">
            </div>
            <button class="add-button" id="addResourceButton">
                <i class="fas fa-plus"></i>
                我要分享
            </button>
        </div>

        <div class="category-button">
            <button class="category-buttons">全部</button>
            <button class="category-buttons">学习资料</button>
            <button class="category-buttons">发现书影音</button>
            <button class="category-buttons">美食向导</button>
            <button class="category-buttons">旅游攻略</button>
            <button class="category-buttons">兼职竞赛</button>
        </div>
    </div>
    <div class="resource-container">
        <div class="resource-grid" id="resourcesGrid">
                
            <div class="resource-card">
                <img src="https://img0.baidu.com/it/u=2298529242,1939520584&fm=253&fmt=auto&app=120&f=JPEG?w=750&h=500" alt="学习资料" class="card-image" title="学习资料">
                <div class="card-content">
                    <a href="#学习资料" class="card-title">计算机学习资料</a>
                    <p class="card-introduction">零基础入门计算机，20天从小白成为大佬！（误）</p>
                    <a href="#学习资料" class="card-link">查看详情</a>
                    <div class="card-otherinformation">
                        <span>分享者：用户已注销</span>
                        <span>提交时间：2025.9.1</span>
                    </div>                    </div>
            </div>

            <div class="resource-card">
                <img src="https://pic.rmb.bdstatic.com/cms/c099f98104635c80ba4583399f063170_1688365407.7336_640.jpeg" alt="视频剪辑" class="card-image" title="视频剪辑">
                <div class="card-content">                        
                    <a href="视频剪辑入门指南" class="card-title">视频剪辑入门指南</a>
                    <p class="card-introduction">15节课程教会你视频剪辑的基础操作和进阶技巧！</p>
                    <a href="#视频剪辑入门指南" class="card-link">查看详情</a>
                    <div class="card-otherinformation">
                        <span>分享者：少羽</span>
                        <span>提交时间：2024.5.6</span>
                    </div>
                </div>
            </div>

            <div class="resource-card">
                <img src="https://qcloud.dpfile.com/pc/EA5Of8t25k5gSetFbrGSxj3EvnkLU6IClbKb7jKy9-4OS3gG8rPghTr_k6GvO5x5.jpg" alt="美食分享" class="card-image" title="美食分享">
                <div class="card-content">
                    <a href="身边美食分享" class="card-title">身边美食分享</a>
                    <p class="card-introduction">搜罗街头美味，分享吃货心得，乐享美食生活</p>
                    <a href="身边美食分享" class="card-link">查看详情</a>
                    <div class="card-otherinformation">
                        <span>分享者：.</span>
                        <span>提交时间：2025.9.29</span>
                    </div>
                </div>
            </div>

            <div class="resource-card">
                <img src="https://img2.baidu.com/it/u=4151619466,867850242&fm=253&fmt=auto&app=138&f=JPEG?w=800&h=1198" alt="旅游攻略" class="card-image" title="旅游攻略">
                <div class="card-content">
                    <a href="成都旅游" class="card-title">成都旅游指南</a>
                    <p class="card-introduction">探熊猫基地，游锦里宽窄巷，品蜀都韵味</p>
                    <a href="成都旅游" class="card-link">查看详情</a>
                    <div class="card-otherinformation">
                        <span>分享者：孙笑川</span>
                        <span>提交时间：2025.8.5</span>
                    </div>
                </div>
            </div>

            <div class="resource-card">
                <img src="https://bj.bcebos.com/bjh-pixel/1699155996448510779_0_ainote_new.jpg" alt="好书分享" class="card-image" title="好书分享">
                <div class="card-content">
                    <a href="10月好书" class="card-title">10月好书分享</a>
                    <p class="card-introduction">10月最值得期待的新书来了！看看身边人都在读什么</p>
                    <a href="10月好书" class="card-link">查看详情</a>
                    <div class="card-otherinformation">
                        <span>分享者：ucue</span>
                        <span>提交时间：2025.10.11</span>
                    </div>
                </div>
            </div>

            <div class="resource-card">
                <img src="https://img0.baidu.com/it/u=3918648333,2548278842&fm=253&fmt=auto&app=138&f=JPEG?w=800&h=1067" alt="大学生兼职" class="card-image" title="大学生兼职">
                <div class="card-content">
                    <a href="大学生兼职" class="card-title">大学生兼职</a>
                    <p class="card-introduction">学业兼职两不误，积累经验实现经济独立</p>
                    <a href="大学生兼职" class="card-link">查看详情</a>
                    <div class="card-otherinformation">
                         <span>分享者：Eternity</span>
                         <span>提交时间：2025.10.4</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal" id="resourceModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>提交新资源</h2>
                <button class="close-button" id="closeButton">&times;</button>
            </div>
            <form id="resourceForm">

                <div class="form-group">
                    <label class="form-label" for="resourceTitle">资源名称</label>
                    <input type="text" class="form-input" id="resourceTitle" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="resourceDescription">内容简介</label>
                    <textarea class="form-textarea" id="resourceDescription"></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label" for="resourceImage">封面图片</label>
                    <input type="text" class="form-input" id="resourceImage" placeholder="输入图片地址">
                </div>

                <div class="form-group">
                    <label class="form-label" for="resourceLink">资源链接</label>
                    <input type="text" class="form-input" id="resourceLink" placeholder="输入链接地址">
                </div>

                <div class="form-group">
                    <label class="form-label" for="resourceAuthor">分享者</label>
                    <input type="text" class="form-input" id="resourceAuthor" required>
                </div>

                <button type="submit" class="form-submit">提交</button>
            </form>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded',function(){   //当dom内容加载完成后执行
            const searchInput = document.getElementById('searchinput')  
            let resourceCards = document.querySelectorAll('.resource-card')   //获取所有资源卡片元素

            searchInput.addEventListener('input',function(){   //为搜索输入框添加事件监听器
                const searchTerm = this.value.toLowerCase().trim()   //获取搜索关键词并转换为小写，去除首尾空格

                let hasResults = false   //标记是否有搜索结果

                resourceCards.forEach(card => {   //遍历所有资源卡片 

                    const title = card.querySelector('.card-title').textContent.toLowerCase();
                    const introduction = card.querySelector('.card-introduction').textContent.toLowerCase();

                    if (title.includes(searchTerm) || introduction.includes(searchTerm)) {
                        card.style.display = 'block'   //显示卡片
                        hasResults = true
                    }
                    else {
                        card.style.display = 'none'   //隐藏卡片
                    }
                })

                const existingNoResults = document.querySelector('.no-results')
                const resourcesGrid = document.getElementById('resourcesGrid')
                if (!hasResults && searchTerm !== ''){   //没有搜索结果且搜索关键词不为空
                    if (!existingNoResults) {
                        const noResults = document.createElement('div')
                        noResults.className = 'no-results'
                        noResults.innerHTML = `
                        <div class="no-results-image">
                            <i class="fas fa-search"></i>
                        </div>
                        <h3 class="no-results-title">😢未找到相关资源😢</h3>
                        <p class="no-results-text">前面的道路，以后再来探索吧！</p>
                        `
                        resourcesGrid.appendChild(noResults)   //将提示元素添加到资源网格中
                    }
                } 
                else {
                    if (existingNoResults) {
                        existingNoResults.remove()   //从DOM中删除提示元素
                    }
                }
            })
            const modal = document.getElementById('resourceModal')
            const addResourceButton = document.getElementById('addResourceButton')
            const closeButton = document.getElementById('closeButton')
            const resourceForm = document.getElementById('resourceForm')

            addResourceButton.addEventListener('click',function() {   //为我要分享按钮添加点击事件监听器
                modal.style.display = 'flex'   //显示模态框
            })

            closeButton.addEventListener('click',function() {   //为关闭模态框按钮添加点击事件监听器
                modal.style.display = 'none'   //隐藏模态框
            })

            resourceForm.addEventListener('submit',function(event) {
                event.preventDefault()   //组织表单默认提交行为

            const title = document.getElementById('resourceTitle').value
            const description = document.getElementById('resourceDescription').value
            const image = document.getElementById('resourceImage').value || 'https://img1.baidu.com/it/u=4006815846,4051217737&fm=253&app=138&f=JPEG?w=500&h=667'
            const link = document.getElementById('resourceLink').value || '#好像走丢了'
            const author = document.getElementById('resourceAuthor').value

            const newCard = document.createElement('div')   
            newCard.className = 'resource-card new-card'
            newCard.innerHTML = `   
            <img src="${image}" alt="${title}" class="card-image" title="${title}">
                <div class="card-content">
                    <a href="${link}" class="card-title">${title}</a>
                    <p class="card-introduction">${description}</p>
                    <a href="${link}" class="card-link">查看详情</a>
                    <div class="card-otherinformation">
                        <span>分享者：${author}</span>
                        <span>提交时间：刚刚</span>
                    </div>
                </div>`   //设置新卡片的HTML内容
            
            resourcesGrid.prepend(newCard)   //将新卡片添加到资源网格的开头
            resourceForm.reset()   //重置表单
            modal.style.display = 'none'   //关闭模态框

            setTimeout(() => {   //延迟执行函数 在动画结束后移除动画类
                newCard.classList.remove('new-card')
            },2000)   //延迟2000ms
            
            resourceCards = document.querySelectorAll('.resource-card')
            
            alert('提交成功！快去主页看看吧！')
            })           
        })
    </script>
</body>
</html>